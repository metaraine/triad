(function(){angular.module("triad",[])}).call(this),function(){angular.module("triad").controller("TriadAppCtrl",["$scope","PIXI","TrianglePerson","$timeout","_",function(t,e,i,n,r){var a;return t.pixiRender=function(){var t,e,i,n;for(n=[],e=0,i=a.length;i>e;e++)t=a[e],n.push(t.animate());return n},t.stage=new e.Stage(6750105),t.config={personSize:20,numPeople:4,velocity:2},a=[],n(function(){var e,n,o,s,h,u,c,l,f,p,d,g;for(a=function(){var e,r,a;for(a=[],n=e=1,r=t.config.numPeople;r>=1?r>=e:e>=r;n=r>=1?++e:--e)l=Math.random()*t.parentSize.width,f=Math.random()*t.parentSize.height,c=t.config.personSize,h=new i(l,f,c),h.velocity=t.config.velocity,t.stage.addChild(h),a.push(h);return a}(),g=[],p=0,d=a.length;d>p;p++)h=a[p],o=a.filter(function(t){return t!==h}),e=r.sample(o),s=o.filter(function(t){return t!==e}),u=r.sample(s),h.targets=[e,u],g.push(h.draw());return g})}])}.call(this),function(){angular.module("triad").directive("pixi",["$parse",function(t){return{restrict:"A",scope:!1,controller:["$scope","$element","$attrs","$timeout","PIXI",function(e,i,n,r,a){var o,s,h,u,c,l,f,p;return c=this,h=null,this.start=function(){var t;return t=function(){return c.render(),requestAnimFrame(t)},this.setRenderer(),n.$observe("width",this.resize),n.$observe("height",this.resize),requestAnimFrame(t)},this.setRenderer=function(){switch(u){case"canvas":return h=new a.CanvasRenderer(i[0].width,i[0].height,i[0],p);case"webgl":return h=new a.WebGLRenderer(i[0].width,i[0].height,i[0],p,o);default:return h=a.autoDetectRenderer(i[0].width,i[0].height,i[0],o,p)}},this.render=function(){return s(l,h),h.render(l)},this.getStage=function(){return l},this.getRenderer=function(){return h},this.getContext=function(){return h.gl?h.gl:h.context},this.resize=function(){return h.resize(n.width,n.height)},f=t(n.pixi),l=f(e),s=e.$eval(n.pixiRender),o=e.$eval(n.pixiAntialias||"false"),p=e.$eval(n.pixiTransparent||"false"),u=e.$eval(n.pixiRenderer||"auto"),l||(l=new a.Stage(e.$eval(n.pixiBackground||"0")),f.assign(e,l)),r(this.start.bind(this))}]}}])}.call(this),function(){angular.module("triad").directive("resize",["$window",function(t){return function(e,i){var n,r;return n=function(){return{width:i.parent()[0].offsetWidth,height:i.parent()[0].offsetHeight}},e.$watch(n,function(t){return e.parentSize=t},!0),r=angular.element(t),r.bind("resize",function(){return e.$apply()})}}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("triad").factory("TrianglePerson",function(){var t;return t=function(t){function i(t,e,n,r){i.__super__.constructor.call(this),this.size=n,this.x=t||0,this.y=e||0,this.vx=0,this.vy=0,this.rotation=r||0}var n,r;return e(i,t),n=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},r=function(t,e){var i,n,r,a,o,s;return n=t.x-e.x,r=t.y-e.y,s=Math.sin(Math.PI/3),i=Math.cos(Math.PI/3),o=Math.sin(-Math.PI/3),a=Math.cos(-Math.PI/3),[{x:i*n-s*r+e.x,y:s*n+i*r+e.y},{x:a*n-o*r+e.x,y:o*n+a*r+e.y}]},i.prototype.draw=function(){return this.beginFill(6724095),this.moveTo(0,-this.size/3),this.lineTo(this.size,0),this.lineTo(0,this.size/3),this.lineTo(0,-this.size/3),this.endFill()},i.prototype.animate=function(){var t,e,i,a,o,s,h,u;return this.targets&&2===this.targets.length&&(a=n(this.targets[0],this.targets[1]),this.face(a.x,a.y),u=r(this.targets[0],this.targets[1]),s=u.map(this.roughDistance.bind(this)),t=Math.min.apply(null,s),h=u[s.indexOf(t)],o=-Math.atan2(h.y-this.y,h.x-this.x),e=this.velocity*Math.cos(o),i=-this.velocity*Math.sin(o),Math.sqrt(t)>2*this.velocity)?(this.x+=e,this.y+=i):void 0},i.prototype.face=function(t,e){return this.rotation=-Math.atan2(this.y-e,t-this.x)},i.prototype.roughDistance=function(t){return Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2)},i}(PIXI.Graphics)})}.call(this),function(){angular.module("triad").factory("PIXI",function(){return window.PIXI})}.call(this),function(){angular.module("triad").factory("_",function(){return window._})}.call(this);